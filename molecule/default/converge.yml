---
- name: Converge
  hosts: all
  tasks:
    - name: Test github_runner role syntax and basic functionality
      ansible.builtin.include_role:
        name: github_runner
      vars:
        github_runner_install_docker: false  # Skip docker installation
        github_runner_personal_access_token: "fake_token_for_testing"
        github_runner_name: "test-runner"
        github_runner_repo: "test-user/test-repo"
        github_runner_labels: "self-hosted,test"
        github_runner_java: false
        github_runner_org: false
      tags: molecule-converge
      # Use check mode to validate syntax without actually creating containers
      when: not (ansible_check_mode | default(false))